{{#if isOwnProfile}}
<script type="text/javascript">
  $.uploadPreview({
    input_field: "#image-upload",
    preview_box: "#image-preview",
    label_field: "#image-label",
    label_default: "Choose file",
    label_selected: "Change file",
    no_label: false
  });
  $("#image-preview").css("background-image", "url('/images/{{profileData.image}}')");
  $("#image-preview").css("background-size", "cover");
  $("#image-preview").css("background-position", "center center");
</script>
{{else}}
<script type="text/javascript">
function confirmRelationshipChange(confirmQString, relType, addOrDelete) {
  bootbox.confirm(confirmQString, function (result) {
    if (result == true) {
      $.post("/useraction/" + relType + "/" + addOrDelete + "/{{ loggedInUserData._id }}/{{ profileData._id }}/{{ loggedInUserData._id }}/{{ profileData._id }}/{{ loggedInUserData.username }}", function (result) {
        location.reload();
      });
    }
  });
}

$("#flagButton").click(function () {
  confirmRelationshipChange('Are you sure you want to flag this user?', 'flag', 'add');
});

$("#unflagButton").click(function () {
  confirmRelationshipChange('Are you sure you want to unflag this user?', 'flag', 'delete');
});
$("#blockButton").click(function () {
  confirmRelationshipChange('Are you sure you want to block this user?', 'block', 'add');
});
$("#unblockButton").click(function () {
  confirmRelationshipChange('Are you sure you want to unblock this user?', 'block', 'delete');
});
$("#trustButton").click(function () {
  confirmRelationshipChange('Are you sure you want to trust this user?', 'trust', 'add');
});
$("#untrustButton").click(function () {
  confirmRelationshipChange('Are you sure you want to stop trusting this user?', 'trust', 'delete');
});
$("#followButton").click(function () {
  //i think this is the action we least want to discourage/make weird, so no confirmation dialogue
  $.post("/useraction/follow/add/{{ loggedInUserData._id }}/{{ profileData._id }}/{{ loggedInUserData._id }}/{{ profileData._id }}/{{ loggedInUserData.username }}", function (result) {
    location.reload();
  });
});
$("#unfollowButton").click(function () {
  confirmRelationshipChange('Are you sure you want to unfollow this user?', 'follow', 'delete');
}); 
</script>
{{/if}}
